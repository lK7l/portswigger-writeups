# SQL-инъекция с использованием оператора UNION, определение количества столбцов, возвращаемых запросом

## Цель
Вывести значение добавленное через UNION-запрос на главную страницу тестового сайта.

## Уязвимый параметр
"GET /filter?category=..." (параметр категории).

## Шаги для воспроизведения
1. На тестовой странице выбрать категорию товара (мной была выбрана категория "Accessories").
2. Открыть программу Burp Suite.
3. Открыть раздел "Proxy" --> "HTTP history".
4. Найти строку с методом "GET" и параметрами "/filter?category=...".
5. ПКМ по найденной строке и выбрать "Send to Repeater".
6. Перейти в раздел "Repeater".
7. В строке с параметрами после названия категории (в моем случае "Accessories") добавить sql запрос " ' ORDER BY 1-- ".
8. Отправлять данный запрос меняя число в запросе по возрастанию и смотреть за реакцией сервера, если выпала ошибка с кодом 500, то было предыдущее число являлось кол-вом столбцов (в моем случае).
9. Для определения какой столбец принимает текстовое значение, методом подбора меняя порядок значений в запросе " ' UNION SELECT NULL, 'null', NULL-- ", пока надпись написана в текстовом поле не появится на странице без ошибок.
10. Проверить результат выполнения лабораторной работы на сайте.

## Результат
Появление на веб-странице, введенного в запрос, текстового значения.

## Почему это работает
Запрос вида: SELECT name, description FROM products WHERE category = 'Gifts', можно изменить путем добавления UNION-запроса, что дает возможность вмешательства.
​
## Как исправить
- Использовать parameterized queries / prepared statements, чтобы ввод пользователя не изменял SQL‑структуру.
- Для category использовать allow‑list (разрешённые значения категорий), как дополнительную защиту.


